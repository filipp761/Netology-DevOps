# Домашнее задание к занятию "Память, управление памятью"

## Задание № 1

Что происходит с оперативной памятью во время перехода ПК в:

1) сон (suspend)

> При переходе компьютера в режим “сна” питание подается только на ОЗУ и материнскую плату. Процессор, видеокарта и прочая периферия отключаются. 
Содержимое ОЗУ полностью сохраняется, включая кэшированные данные. Главное не отключать питание!!!

2) гибернацию (hibernate)

> При переходе компьютера в режим “гибернации” питание подается только на материнскую плату. Данные с ОЗУ помещаются в дамп памяти на физическом диске и при включении компьютера восстанавливаются. Кеш-память не сохраняется. Более долгое восстановление данных, нежели использования режима “сна”, но меньшее энергопотребление.

## Задание № 2

В лекции не была упомянута одна известная команда для получения информации о нагрузке на компьютер и в частности на ОЗУ.

vmstat выводит статистику использования виртуальной памяти

* si: объем памяти, выгруженный с диска.

* so: объем памяти, перенесенный на диск.

* Колонка «si» говорит нам, сколько памяти было перемещено из свопа в реальную памяти в секунду. Колонка «so»говорит нам, сколько памяти было перемещено из реальной памяти в swap

## Задание № 3

Приведите 3 команды, которые выведут на экран следующее:

1) Архитектуру ПК

```bash
lscpu | grep Архитектура
arch
uname -m
```

2) Модель процессора

```sh
lscpu | grep 'Имя модели'
cat /proc/cpuinfo | grep 'model name'
lshw -class processor
```

3) Количество памяти, которая уже не используется процессами, но еще остается в памяти(ключевое слово - inactive).

```sh
vmstat -a
cat /proc/meminfo | grep Inactive
vmstat -s
```

### Задание № 4

>Команда `free` предоставляет информацию об общем объеме физической памяти и памяти подкачки , а также о свободной и используемой памяти.

> скрин

* total — это число представляет общий объем памяти, который может быть использован приложениями.
* used — Используемая память. Он рассчитывается как: used = total - free - buffers - cache
* free — Свободная / неиспользуемая память.
* total — этот столбец можно игнорировать, поскольку он не имеет значения. Это здесь только для обратной совместимости.
* buff / cache — объединенная память, используемая буферами ядра, а также страничным кешем и блоками. Эта память может быть освобождена в любое время, если это необходимо приложениям. Если вы хотите, чтобы буферы и кеш отображались в двух отдельных столбцах, используйте параметр -w .
* available — оценка объема памяти, доступного для запуска новых приложений без подкачки.

### 1) Создайте скрин вывода команды `free -h -t`**
> скрин

### 2) Создайте swap-файл размером 1ГБ**

В первую очередь отключите swap: `swapoff -a`

Далее изменяем размер swap-файла. Если файл отсутствует в системе, эта же команда позволит его создать: `sudo dd if=/dev/zero of=/swapfile bs=1M count=1024`

Укажем в качестве count необходимый размер swap, 1024. 

Подготовьте swap-файл: `chmod 600 /swapfile && mkswap /swapfile`

Включите swap: `swapon /swapfile`

**3) Добавьте настройку чтобы swap-файл подключался автоматически при перезагрузке виртуальной машины (подсказка: необходимо внести изменения в файл `/etc/fstab`)**
Это реализуется через текстовый редактор, запущенный с правами суперпользователя, либо при помощи введенной в терминал команды:
```
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```
**4) Создайте скрин вывода команды ```free -h -t```**
> скрин
**5) Создайте скрин вывода команды `swapon -s`**
> скрин
**6) Измените процент свободной оперативной памяти, при котором начинает использоваться раздел подкачки до 30%. Сделайте скрин внесенного изменения.**
```
sudo sysctl vm.swappiness=30
```
